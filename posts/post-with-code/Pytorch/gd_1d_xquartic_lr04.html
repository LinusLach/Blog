<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>D3.js Scatter Plot with Slider</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <div id="slider"></div>
  <svg id="scatterplot"></svg>

  <script>
    // Define data
    const coord =[[-1.0, 1.3489254, 1.3669645, 1.4004358, 1.4628398, 1.5800488, 1.8020948, 2.221891, 2.9, 3.7876277, 3.346436, 3.809908, 3.3069708, 3.8242805, 3.2806299, 3.831621, 3.266908, 3.834741, 3.2610202, 3.835934],
                  [3.8, 2.0003552, 1.9991941, 1.9951854, 1.9811876, 1.9315228, 1.7530594, 1.1354367, -0.43705702, -1.1531696, -1.0874336, -1.1268828, -1.0390167, -1.1080825, -1.0038314, -1.097913, -0.98463964, -1.093473, -0.97622895, -1.0917566]] ;
    const margin = { top: 50, right: 50, bottom: 50, left: 50 };
    const width = 600 - margin.left - margin.right;
    const height = 400 - margin.top - margin.bottom;

    // Set up the slider
    const slider = d3.select("#slider")
      .append("input")
      .attr("type", "range")
      .attr("min", 0)
      .attr("max", coord[0].length - 1)
      .attr("step", 1)
      .attr("value",0)
      .on("input", update);

    // Set up the SVG container
    const svg = d3.select("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", `translate(${margin.left}, ${margin.top})`);

    // Set up scales
    const xScale = d3.scaleLinear()
      .domain([-2, 6])
      .range([0, width]);

    const yScale = d3.scaleLinear()
      .domain([-2, 10])
      .range([height, 0]);

    const line = d3.line()
                    .x(d => xScale(d[0]))
                    .y(d => yScale(d[1]));

    svg.append("image")
      .attr("xlink:href", "https://raw.githubusercontent.com/LinusLach/Blog/master/posts/post-with-code/Pytorch/images/output_xqaurtic_lr01.png")
      .attr("width", "90%")
      .attr("height", "90%")
      .attr('x',-32)
      .attr('y',-25)
      .attr("preserveAspectRatio", "none");


    // Define the update function for the slider
    function update() {
      const sliderValue = +slider.property("value");

      // Filter the data based on the slider value
      const filteredData = coord[0].slice(0, sliderValue + 1).map((x, i) => [x, coord[1][i]]);

      // Bind the data to circles
      const circles = svg.selectAll("circle")
        .data(filteredData);

      const path = svg.selectAll("path")
        .data([filteredData]);

      // Remove any circles that are no longer needed
      circles.exit().remove();
      path.exit().remove();
      // Add any new circles
      circles.enter().append("circle")
        .attr("r", 5)
        .attr("cx", d => xScale(d[0]))
        .attr("cy", d => yScale(d[1]))
        .attr("fill", "red")
        .merge(circles)
        .attr("cx", d => xScale(d[0]))
        .attr("cy", d => yScale(d[1]));

       path.enter().append("path")
           .attr("fill", "none")
           .attr("stroke", "red")
           .attr("stroke-width", 2)
           .merge(path)
           .attr("d", line);
       }
    // Call the update function initially
    update();
  </script>
</body>
</html>

